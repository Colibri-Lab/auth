---
apps:
  desc: '#{auth-storages-apps-desc;Приложения}'
  access-point: auth
  models:
    table: Models\Apps
    row: Models\App
  params:
    visible: true
    maybepublished: false
  module: Auth
  fields:
    key:
      desc: Ключ приложения  (наименование)
      type: varchar
      length: "255"
      component: Text
      class: string
      attrs: []
      params:
        required: false
        enabled: true
        readonly: false
        visual: false
        code: ""
        list: true
        greed: ""
        vertical: false
        viewer: ~
        mask: ""
    token:
      group: window
      desc: Токен приложения (постоянный)
      note: Токен приложения, генерируется автоматически
      type: varchar
      length: "32"
      component: Text
      class: string
      attrs: []
      params:
        required: false
        enabled: true
        readonly: false
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS
        generator: (value) => { return String.MD5((new Date().getTime()) + ''); }
    params:
      group: window
      desc: Параметры
      note: Параметры приложения
      type: json
      component: Object
      class: ObjectField
      attrs: []
      params:
        required: false
        enabled: true
        readonly: false
        list: true
        greed: ""
        viewer: Colibri.UI.ObjectViewer
        vertical: true
        visual: false
        code: ""
        mask: ""
        generator: ""
      fields:
        livetime:
          desc: Время жизни
          note: Время жизни токена
          type: int
          component: Number
          class: int
          attrs: []
          params:
            required: false
            enabled: true
            readonly: false
            list: false
            greed: ""
            viewer: ~
            vertical: false
            visual: false
            code: ""
            mask: ""
            generator: ""
          default: "3600"
        domains:
          desc: Домены
          note: Паттерны доменов, с которых разрешен доступ к приложению
          type: json
          component: Array
          class: ArrayField
          attrs: []
          params:
            required: false
            enabled: true
            readonly: false
            list: true
            greed: ""
            viewer: Colibri.UI.ArrayViewer
            vertical: false
            visual: false
            code: ""
            mask: ""
            generator: ""
          fields:
            pattern:
              desc: Паттерн домена
              note: Используйте *-у для указания любого количества символов и цифр
                и ? для указания одного символа и цифры
              type: varchar
              length: "255"
              component: Text
              class: string
              attrs: []
              params:
                required: false
                enabled: true
                readonly: false
                list: false
                greed: ""
                viewer: ~
                vertical: false
                visual: false
                code: ""
                mask: ""
                generator: ""
        allowrenew:
          desc: Разрешить восстановление по короткому токену
          note: Дает возможность получить текущий сессионный токен по короткому постоянному
            токену пользователя (НЕ БЕЗОПАСНО)
          type: bool
          component: Checkbox
          class: bool
          default: "0"
          attrs: []
          params:
            required: false
            enabled: true
            readonly: false
            list: false
            greed: ""
            viewer: ~
            vertical: false
            visual: false
            code: ""
            mask: ""
            generator: ""
  indices:
    apps_token_idx:
      fields:
      - token
      type: UNIQUE
      method: BTREE
    apps_key_idx:
      fields:
      - key
      type: UNIQUE
      method: BTREE
sessions:
  desc: '#{auth-storages-sessions-desc;Сессии}'
  access-point: auth
  models:
    table: Models\Sessions
    row: Models\Session
  params:
    visible: true
    maybepublished: false
  module: Auth
  fields:
    member:
      group: window
      desc: '#{auth-storages-sessions-fields-member-desc;Токен пользователя}'
      note: '#{auth-storages-sessions-fields-member-note;Постоянный токен пользователя}'
      type: varchar
      length: "32"
      component: Text
      class: string
      attrs: []
      params:
        required: true
        enabled: true
        readonly: false
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: ""
        generator: ""
    key:
      group: window
      desc: '#{auth-storages-sessions-fields-key-desc;Ключ сессии}'
      note: '#{auth-storages-sessions-fields-key-note;Генерируется автоматически из
        токена сессии (нужен для поиска)}'
      type: varchar
      length: "32"
      component: Text
      class: string
      attrs: []
      params:
        required: true
        enabled: true
        readonly: true
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: ""
        generator: ""
    token:
      group: window
      desc: '#{auth-storages-sessions-fields-token-desc;Токен сессии (JWT)}'
      note: '#{auth-storages-sessions-fields-token-note;JWT токен}'
      type: varchar
      length: "8192"
      component: TextArea
      class: string
      attrs: []
      params:
        required: true
        enabled: true
        readonly: true
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: ""
        generator: ""
    expires:
      group: window
      desc: '#{auth-storages-sessions-fields-expires-desc;Время жизни}'
      note: '#{auth-storages-sessions-fields-expires-note;Количество секунд жизни
        токена, после того, как это время пройдет с момента создания, сессия будет
        заморожена, и ее нужно будет восстановить}'
      type: int
      component: Number
      class: int
      default: "3600"
      attrs: []
      params:
        required: true
        enabled: true
        readonly: false
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: ""
        generator: ""
    secret:
      group: window
      desc: '#{auth-storages-sessions-fields-secret-desc;Секретный ключ}'
      note: '#{auth-storages-sessions-fields-secret-note;Ключ для декодирования сессии}'
      type: varchar
      length: "32"
      component: Text
      class: string
      attrs: []
      params:
        required: true
        enabled: true
        readonly: true
        list: true
        greed: ""
        viewer: ~
        vertical: false
        visual: false
        code: ""
        mask: ""
        generator: ""
  indices:
    sessions_member_idx:
      fields:
      - member
      type: NORMAL
      method: BTREE
    sessions_key_idx:
      fields:
      - key
      type: UNIQUE
      method: BTREE
...
